# Исправление ошибки 403: "This project does not have the access to Custom Search JSON API"

## Проблема:

Ошибка в логах:
```
Error: Google Search API error: {"error":{"code":403,"message":"This project does not have the access to Custom Search JSON API.","status":"PERMISSION_DENIED"}}
```

## Причины:

1. **API включен не в том проекте** - API ключ создан в одном проекте, а API включен в другом
2. **API не включен** - хотя вы думаете, что включили
3. **Нужно подождать** - после включения API может потребоваться несколько минут

## Решение:

### Шаг 1: Проверьте, в каком проекте создан API ключ

1. Зайдите на https://console.cloud.google.com/apis/credentials
2. Найдите ваш API ключ в списке
3. Нажмите на название ключа
4. Посмотрите, в каком проекте он создан (будет указано вверху страницы)

### Шаг 2: Убедитесь, что вы в правильном проекте

1. Вверху страницы Google Cloud Console найдите выпадающий список с названием проекта
2. Убедитесь, что выбран **тот же проект**, где создан API ключ
3. Если нет - выберите правильный проект

### Шаг 3: Проверьте, включен ли Custom Search API

1. Убедитесь, что вы в правильном проекте
2. Перейдите в **"APIs & Services"** → **"Library"**
3. В поиске введите: **"Custom Search API"**
4. Найдите **"Custom Search API"** в результатах
5. Проверьте статус:
   - Если написано **"ENABLE"** - нажмите и включите
   - Если написано **"MANAGE"** - API уже включен

### Шаг 4: Проверьте правильность названия API

Убедитесь, что вы включили именно:
- ✅ **"Custom Search API"** (правильно)
- ❌ НЕ "Custom Search" (без API)
- ❌ НЕ "Google Custom Search" (старое название)

### Шаг 5: Подождите несколько минут

После включения API может потребоваться 2-5 минут для активации. Подождите и попробуйте снова.

### Шаг 6: Проверьте ограничения API ключа

1. Зайдите в **"APIs & Services"** → **"Credentials"**
2. Найдите ваш API ключ
3. Нажмите на него
4. В разделе **"API restrictions"** должно быть:
   - Выбрано **"Restrict key"**
   - В списке выбран **"Custom Search API"**
5. Если нет - исправьте и сохраните

### Шаг 7: Передеплойте проект на Vercel

После исправления:
1. Убедитесь, что переменные окружения правильные в Vercel
2. Передеплойте проект (Redeploy)

## Быстрая проверка:

1. ✅ API ключ создан в проекте X
2. ✅ Custom Search API включен в том же проекте X
3. ✅ API ключ ограничен только Custom Search API
4. ✅ Переменные окружения добавлены в Vercel
5. ✅ Проект передеплоен на Vercel

## Альтернативное решение:

Если проблема сохраняется, попробуйте:

1. **Создать новый API ключ:**
   - Удалите старый ключ
   - Создайте новый
   - Ограничьте его Custom Search API
   - Добавьте в Vercel

2. **Проверить квоты:**
   - Зайдите в "APIs & Services" → "Dashboard"
   - Проверьте, не превышены ли лимиты

3. **Использовать другой API:**
   - Bing Search API (1000 запросов/месяц бесплатно)
   - SerpAPI (100 запросов бесплатно)

